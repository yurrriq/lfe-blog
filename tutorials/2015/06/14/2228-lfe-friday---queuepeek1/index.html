

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      
        LFE Friday - queue:peek/1 -
      
      LFE Tutorials, News, &amp; Updates
    </title>
    <meta name="description" content="">
    <meta name="author" content="LFEuminati | Alien Alliance">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/assets/themes/hooligan/css-social-buttons/css/zocial.stripped.css">
    <link href="/assets/themes/hooligan/css/pygments.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/css/twilight.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/css/overrides.css" rel="stylesheet" type="text/css" media="all">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="LFE News & Updates Atom Feed">
    <link rel="shortcut icon" href="/assets/images/favicon.ico">
    <!-- fav and touch icons -->
    <!-- Update these with your own images
      <link rel="apple-touch-icon" href="assets/images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="assets/images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="assets/images/apple-touch-icon-114x114.png">
    -->
  </head>

  <body>
    <div id="page-wrap">
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>

	    <a class="brand" href="/"><img style="float: left; padding-right: 8px;" src="/assets/images/LispFlavoredErlang-xtinsy.png" /> LFE Tutorials, News, &amp; Updates</a>

            <div class="nav-collapse">
              <ul class="nav">
                
                
                


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/authors.html">Authors</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



		<li><a href="http://docs.lfe.io/">Docs</a></li>
		<li><a href="http://lfe.io/">lfe.io</a></li>
              </ul>
              <ul class="nav pull-right social visible-desktop">
                <li class="divider-vertical"></li>
                
                <li>
                  <a href="http://webchat.freenode.net/?channels=erlang-lisp" style="color: #999; font-size: 180%; margin-top: 3px;" target="_blank">
                    <span class=""> #</span>
                  </a>
                </li>
                
                
                <li>
                  <a href="https://github.com/lfe" class="zocial github icon" target="_blank">
                    <span class="hidden-desktop">Github</span>
                  </a>
                </li>
                
                
                <li>
                  <a href="https://plus.google.com/u/1/communities/103919485468949397234" class="zocial googleplus icon" target="_blank">
                    <span class="hidden-desktop">Google+</span>
                  </a>
                </li>
                
                
                <li>
                  <a href="https://twitter.com/ErlangLisp" class="zocial twitter icon" target="_blank">
                    <span class="hidden-desktop">Twitter</span>
                  </a>
                </li>
                
                
                
                
                <li>
                  <a href="http://feeds.feedburner.com/lfe/news-and-updates" class="zocial rss icon" target="_blank">
                    <span class="hidden-desktop">FeedBurner</span>
                  </a>
                </li>
                
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="content">
          

<div class="page-header">
  <h1>
    LFE Friday - queue:peek/1
    
  </h1>
</div>

<div class="row">
  <div class="span8">
    
<p><a href="/assets/images/posts/LispFlavoredErlang-medium-square.png"><img class="left tiny" src="/assets/images/posts/LispFlavoredErlang-medium-square.png" /></a>This week's LFE Friday was translated with permission from the
<a href="http://www.proctor-it.com/category/erlang/erlang-thursday/">Erlang Thursday</a>
series by <a href="https://twitter.com/stevenproctor">Steven Proctor</a>.
<em>This week's translator</em>: Robert Virding.</p>

<p>For today's LFE Friday we continue looking at the <code>queue</code> module and look at <a href="http://erlang.org/doc/man/queue.html#peek-1">queue:peek/1</a> from the Extended API.</p>

<p><code>queue:peek/1</code> takes a queue as it's argument and returns either the atom <code>empty</code> if the queue is empty, or <code>#(value item)</code> where <code>item</code> is the item at the head of the queue.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">queue-one</span> <span class="p">(</span><span class="nv">queue:from_list</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)))</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">5</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek</span> <span class="nv">queue-one</span><span class="p">)</span>
<span class="o">#(</span><span class="nv">value</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">empty-queue</span> <span class="p">(</span><span class="nv">queue:new</span><span class="p">))</span>
<span class="o">#(</span><span class="p">()</span> <span class="p">())</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek</span> <span class="nv">empty-queue</span><span class="p">)</span>     
<span class="nv">empty</span></code></pre></div>

<p><code>queue:peek/1</code> does not modify the existing queue at all either, so we can call it once as seen above, or multiple times as below, and the queue we peeked at doesn't change.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="nv">queue-two</span> <span class="p">(</span><span class="nv">queue:from_list</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span><span class="p">)))</span>
<span class="o">#(</span><span class="p">(</span><span class="nv">f</span> <span class="nv">e</span><span class="p">)</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek</span> <span class="nv">queue-two</span><span class="p">)</span>
<span class="o">#(</span><span class="nv">value</span> <span class="nv">a</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek</span> <span class="nv">queue-two</span><span class="p">)</span>
<span class="o">#(</span><span class="nv">value</span> <span class="nv">a</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek</span> <span class="nv">queue-two</span><span class="p">)</span>
<span class="o">#(</span><span class="nv">value</span> <span class="nv">a</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="nv">queue-two</span>
<span class="o">#(</span><span class="p">(</span><span class="nv">f</span> <span class="nv">e</span><span class="p">)</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span></code></pre></div>

<p>And unlike we saw in the previous <a href="http://blog.lfe.io/tutorials/2015/05/29/0345-lfe-friday---queuehead1/">LFE Friday on queue:head/1</a>, we can safely peek at an empty queue instead of getting an exception.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:head</span> <span class="nv">empty-queue</span><span class="p">)</span>
<span class="nv">exception</span> <span class="nv">error:</span> <span class="nv">empty</span>
  <span class="nv">in</span> <span class="p">(</span><span class="err">:</span> <span class="nv">queue</span> <span class="nv">head</span> <span class="o">#(</span><span class="p">()</span> <span class="p">()))</span>

<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek</span> <span class="nv">empty-queue</span><span class="p">)</span>
<span class="nv">empty</span></code></pre></div>

<p>Erlang's <code>queue</code> module also contains <a href="http://erlang.org/doc/man/queue.html#peek_r-1">queue:peek_r/1</a> which will peek at the element at the rear of the queue.</p>

<div class="highlight"><pre><code class="language-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek_r</span> <span class="nv">empty-queue</span><span class="p">)</span>                      
<span class="nv">empty</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek_r</span> <span class="nv">queue-one</span><span class="p">)</span>      
<span class="o">#(</span><span class="nv">value</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek_r</span> <span class="nv">queue-one</span><span class="p">)</span>
<span class="o">#(</span><span class="nv">value</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek_r</span> <span class="nv">queue-one</span><span class="p">)</span>
<span class="o">#(</span><span class="nv">value</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="p">(</span><span class="nv">queue:peek_r</span> <span class="nv">queue-two</span><span class="p">)</span>
<span class="o">#(</span><span class="nv">value</span> <span class="nv">f</span><span class="p">)</span>
<span class="nb">&gt;</span> <span class="nv">queue-two</span>               
<span class="o">#(</span><span class="p">(</span><span class="nv">f</span> <span class="nv">e</span><span class="p">)</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="nv">queue-one</span>
<span class="o">#(</span><span class="p">(</span><span class="mi">5</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">&gt;</span> <span class="nv">empty-queue</span>
<span class="o">#(</span><span class="p">()</span> <span class="p">())</span></code></pre></div>

<p>-Proctor, Robert</p>

    <hr>
    <div class="pagination btn-group">
      
        <a class="btn prev" href="/tutorials/2015/06/05/0024-lfe-friday---queuetail1" title="LFE Friday - queue:tail/1">&larr; Previous</a>
      
        <a class="btn" href="/archive.html">Archive</a>
      
        <a class="btn next" href="/tutorials/2015/06/20/0055-lfe-friday---queuesplit2" title="LFE Friday - queue:split/2">Next &rarr;</a>
      
    </div>
    <hr>
    
  </div>

  <div class="span4">
    <section>
      <h4>Author</h4>
      <div class="author"><span><a href="/authors.html#Robert Virding">Robert Virding</a></span></div>
    </section>
    <section>
      <h4>Published</h4>
      <div class="date"><span>14 June 2015</span></div>
    </section>
    
      <section>
        <h4>Category</h4>
        <span class="category">
          tutorials
        </span>
      </section>
    
    
      <section>
        <h4>Tags</h4>
        <ul class="tag_box">
          
          


  
     
    	<li><a href="/tags.html#lfe friday-ref">lfe friday <span>35</span></a></li>
     
    	<li><a href="/tags.html#lfe-ref">lfe <span>40</span></a></li>
     
    	<li><a href="/tags.html#erlang-ref">erlang <span>45</span></a></li>
    
  



        </ul>
      </section>
    
  </div>
</div>


        </div>
      </div> <!-- /container -->

      <div class="footer-push"></div>
    </div><!--/.page-wrap -->

    <footer>
      <div class="container">
        <p>&copy; 2014-2015 LFEuminati | Alien Alliance
        </p>
      </div>
    </footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/hooligan/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/hooligan/bootstrap/js/bootstrap.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-38274766-2', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>

